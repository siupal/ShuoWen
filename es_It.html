<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>æ„å¤§åˆ©è¯­ & è¥¿ç­ç‰™è¯­å­¦ä¹  Â· æ„è¯/æ¥è¾/è¯æ ¹ï½œCEFR A1â€“C2</title>
<meta name="description" content="åŸºäºæ„è¯ï¼ˆå‰ç¼€/è¯æ ¹/åç¼€ï¼‰ä¸åœºæ™¯åº”ç”¨çš„æ„å¤§åˆ©è¯­/è¥¿ç­ç‰™è¯­å­¦ä¹ å·¥å…·ï¼Œæ”¯æŒå½¢è¿‘è¯ç¼–è¾‘è·ç¦»ã€å¤šç»´æ£€ç´¢ã€SRS å¤ä¹ ã€TTS å‘éŸ³ã€‚">
<style>
:root{
  --bg:#f8fafc; --fg:#0f172a; --muted:#64748b; --card:#ffffff; --border:#e2e8f0;
  --primary:#22c55e; --accent:#14b8a6; --chip:#ecfeff; --chip-fg:#0f766e;
  --good:#16a34a; --warn:#d97706; --bad:#dc2626; --shadow:0 6px 24px rgba(2,6,23,0.08);
}
.dark{
  --bg:#0b1020; --fg:#e6edf3; --muted:#93a4b5; --card:#0f172a; --border:#1f2937;
  --primary:#34d399; --accent:#2dd4bf; --chip:#0b2530; --chip-fg:#96f2ff; --shadow:0 8px 28px rgba(0,0,0,0.5);
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0; font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Noto Sans","Helvetica Neue",Arial,"Apple Color Emoji","Segoe UI Emoji"; background:var(--bg); color:var(--fg);}
a{color:var(--primary);text-decoration:none}
header{
  position:sticky; top:0; z-index:10;
  background:linear-gradient(180deg,var(--bg),rgba(0,0,0,0));
  backdrop-filter:saturate(1.2) blur(6px);
  padding:10px 14px; border-bottom:1px solid var(--border);
}
.header-inner{display:flex; align-items:center; gap:12px; max-width:1400px; margin:0 auto}
.brand{display:flex; align-items:center; gap:10px; font-weight:700; letter-spacing:.2px}
.brand .logo{width:28px; height:28px; border-radius:8px; background:linear-gradient(135deg,var(--primary),var(--accent)); box-shadow:var(--shadow)}
.brand small{color:var(--muted); font-weight:600}
.searchbar{flex:1; display:flex; align-items:center; gap:8px; background:var(--card); border:1px solid var(--border); padding:8px 10px; border-radius:10px; box-shadow:var(--shadow)}
.searchbar input{flex:1; border:0; outline:none; background:transparent; color:var(--fg); font-size:14px}
.btn{border:1px solid var(--border); background:var(--card); color:var(--fg); padding:8px 12px; border-radius:10px; cursor:pointer}
.btn:hover{border-color:var(--primary)}
.btn.primary{background:linear-gradient(135deg,var(--primary),var(--accent)); color:#fff; border-color:transparent}
.btn.ghost{background:transparent}
.badge{display:inline-flex; align-items:center; gap:6px; padding:4px 8px; border-radius:999px; background:var(--chip); color:var(--chip-fg); font-weight:600; font-size:12px}
main{max-width:1400px; margin:14px auto; display:grid; grid-template-columns:280px 1fr 360px; gap:14px; padding:0 14px}
@media (max-width:1100px){main{grid-template-columns:260px 1fr}}
@media (max-width:980px){main{grid-template-columns:1fr;}}
.card{background:var(--card); border:1px solid var(--border); border-radius:14px; box-shadow:var(--shadow)}
.sidebar{padding:12px}
.section-title{display:flex; align-items:center; justify-content:space-between; margin:6px 0 12px}
.section-title h3{margin:0; font-size:15px}
.filters{display:grid; gap:14px}
.chips{display:flex; flex-wrap:wrap; gap:8px}
.chip{padding:6px 10px; border:1px solid var(--border); border-radius:999px; cursor:pointer; user-select:none}
.chip.active{border-color:var(--primary); box-shadow:inset 0 0 0 1px var(--primary)}
hr.sep{border:0; border-top:1px dashed var(--border); margin:4px 0}
small.help{color:var(--muted)}
.input{display:flex; align-items:center; gap:8px; background:var(--bg); border:1px dashed var(--border); padding:8px; border-radius:8px}
.input input, .input select{flex:1; background:transparent; border:0; outline:0; color:var(--fg)}
.results{padding:6px 10px 16px}
.stats{display:flex; flex-wrap:wrap; gap:10px; align-items:center; padding:10px}
.grid{display:grid; grid-template-columns:repeat(2, minmax(220px, 1fr)); gap:10px}
@media (max-width:980px){.grid{grid-template-columns:1fr}}
.word-card{padding:12px; border:1px solid var(--border); border-radius:12px; cursor:pointer; transition:transform .06s ease}
.word-card:hover{transform:translateY(-2px)}
.word-head{display:flex; align-items:center; justify-content:space-between; gap:10px}
.word{font-weight:800; font-size:18px; letter-spacing:.2px}
.tags{display:flex; flex-wrap:wrap; gap:6px; align-items:center}
.mean{color:var(--muted); margin-top:4px}
.morph{display:flex; flex-wrap:wrap; gap:6px; margin-top:10px}
.morph span{padding:2px 6px; border-radius:6px; font-size:12px; border:1px solid var(--border)}
.morph .pre{background:#e0f2fe; color:#0c4a6e; border-color:transparent}
.morph .root{background:#fef9c3; color:#713f12; border-color:transparent}
.morph .suf{background:#fce7f3; color:#831843; border-color:transparent}
.detail{padding:12px}
.detail .title{display:flex; align-items:center; justify-content:space-between; gap:10px}
.detail .title h2{margin:0}
.detail .actions{display:flex; gap:8px; flex-wrap:wrap}
.detail section{margin-top:12px}
.detail .def{font-size:15px}
.detail .ex{color:var(--muted)}
.flex{display:flex; gap:10px; flex-wrap:wrap}
.kv{display:grid; grid-template-columns:100px 1fr; gap:8px; align-items:flex-start}
ul.clean{list-style:none; padding:0; margin:0}
ul.clean li{padding:4px 0}
.pill{display:inline-flex; align-items:center; gap:6px; padding:4px 8px; border-radius:999px; border:1px solid var(--border)}
.hlt{padding:0 3px; border-radius:4px; background:linear-gradient(180deg,#fff799, #ffe78f)}
.hlt-pre{padding:0 3px; border-radius:4px; background:linear-gradient(180deg,#bde9ff,#9ae6ff)}
.hlt-suf{padding:0 3px; border-radius:4px; background:linear-gradient(180deg,#ffd6ef,#ffbfe7)}
.sim-list, .family-list{display:flex; flex-wrap:wrap; gap:6px}
.sim-item, .fam-item{padding:6px 10px; border:1px solid var(--border); border-radius:999px; cursor:pointer}
.footer-tools{position:sticky; bottom:0; padding:10px; display:flex; gap:8px; flex-wrap:wrap; background:linear-gradient(0deg,var(--bg),rgba(0,0,0,0)); border-top:1px dashed var(--border)}
.srs{position:fixed; right:20px; bottom:20px; z-index:100; display:flex; gap:8px; flex-wrap:wrap}
.srs .card{padding:14px; width:360px; max-width:90vw}
.srs .q{font-weight:700; font-size:18px}
.srs .btns{display:flex; gap:8px; margin-top:8px}
.srs .btn.again{background:var(--bad); color:#fff}
.srs .btn.hard{background:var(--warn); color:#fff}
.srs .btn.good{background:var(--good); color:#fff}
.srs .btn.easy{background:var(--primary); color:#fff}
small.dim{color:var(--muted)}
.langsel{display:flex; gap:8px; align-items:center}
</style>
</head>
<body>
<header>
  <div class="header-inner">
    <div class="brand">
      <div class="logo"></div>
      <div>
        æ„å¤§åˆ©è¯­ & è¥¿ç­ç‰™è¯­ Â· æ„è¯/æ¥è¾/è¯æ ¹
        <small>CEFR A1 â€“ C2</small>
      </div>
    </div>
    <div class="searchbar">
      <span>ğŸ”</span>
      <input id="q" placeholder="æœç´¢ï¼šå•è¯ / ä¸­æ–‡é‡Šä¹‰ / ç›®æ ‡è¯­å®šä¹‰ / è¯æ ¹ / å‰ç¼€ / åç¼€ / åŒä¹‰è¯ï¼ˆæ”¯æŒæ¨¡ç³Šï¼‰" />
      <button class="btn" id="clearBtn" title="æ¸…ç©º">æ¸…ç©º</button>
    </div>
    <div class="actions langsel">
      <label class="pill">è¯­è¨€
        <select id="langSelect">
          <option value="it">Italiano</option>
          <option value="es">EspaÃ±ol</option>
        </select>
      </label>
      <button class="btn" id="darkBtn" title="æš—é»‘æ¨¡å¼">ğŸŒ™/â˜€ï¸</button>
      <button class="btn" id="importBtn" title="å¯¼å…¥è¯åº“(JSON)">å¯¼å…¥</button>
      <button class="btn" id="exportBtn" title="å¯¼å‡ºå½“å‰è¯åº“(JSON)">å¯¼å‡º</button>
      <input type="file" id="fileInput" accept=".json" style="display:none">
    </div>
  </div>
</header>

<main>
  <!-- Sidebar filters -->
  <aside class="card sidebar" id="sidebar">
    <div class="section-title">
      <h3>ç­›é€‰</h3>
      <span class="badge">å¤šç»´æ£€ç´¢</span>
    </div>
    <div class="filters">
      <div>
        <small class="help">CEFR çº§åˆ«</small>
        <div class="chips" id="levelChips"></div>
      </div>
      <div>
        <small class="help">è¯æ€§</small>
        <div class="chips" id="posChips"></div>
      </div>
      <div>
        <small class="help">ä¸»é¢˜</small>
        <div class="chips" id="topicChips"></div>
      </div>
      <hr class="sep">
      <div>
        <small class="help">æ„è¯ï¼ˆå‰ç¼€ / è¯æ ¹ / åç¼€ï¼‰</small>
        <div class="input"><input id="morphSearch" placeholder="å¦‚ï¼šre / pre / tele / bio / -zione / -ciÃ³n / -mente"></div>
        <div class="chips" id="morphChips"></div>
        <div class="flex">
          <label class="pill"><input type="checkbox" id="requireAll"> åŒæ—¶åŒ…å«æ‰€é€‰å…¨éƒ¨å½¢æ€</label>
          <label class="pill"><input type="checkbox" id="onlyRoots"> ä»…åŒ¹é…è¯æ ¹/è¯å¹²</label>
        </div>
      </div>
      <hr class="sep">
      <div>
        <small class="help">é¢‘ç‡ï¼ˆ1-5ï¼Œè¶Šé«˜è¶Šå¸¸è§ï¼‰</small>
        <div class="input"><input type="range" id="freq" min="1" max="5" value="1"><span id="freqVal">â‰¥1</span></div>
      </div>
      <div class="flex">
        <button class="btn" id="resetBtn">é‡ç½®ç­›é€‰</button>
        <small class="help">å¯ç»„åˆç­›é€‰ + æœç´¢ï¼›ç‚¹å‡»èŠ¯ç‰‡åå‘æ£€ç´¢</small>
      </div>
    </div>
  </aside>

  <!-- Results -->
  <section class="card results">
    <div class="stats">
      <span class="badge">ç»“æœ <b id="count"></b> / <span id="total"></span></span>
      <span class="pill">å½¢è¿‘è¯ï¼šç¼–è¾‘è·ç¦»</span>
      <span class="pill">TTSï¼šç‚¹å‡»å•è¯å³ä¾§ğŸ”Š</span>
      <span class="pill">SRSï¼šå³ä¸‹è§’å¼€å§‹å¤ä¹ </span>
    </div>
    <div class="grid" id="grid"></div>
    <div class="footer-tools">
      <button class="btn primary" id="startSrsBtn">ç”¨å½“å‰ç»“æœå¼€å§‹å¤ä¹ </button>
      <button class="btn" id="genSceneBtn">ç”¨æ‰€é€‰è¯ç”Ÿæˆåœºæ™¯å¥</button>
      <small class="help">æç¤ºï¼šåŒå‡»å•è¯åŠ å…¥å¤ä¹ æ¸…å•ï¼›ç‚¹å‡»è¯æ ¹/åç¼€å¯åå‘æ£€ç´¢</small>
    </div>
  </section>

  <!-- Detail -->
  <aside class="card detail" id="detail">
    <div class="title">
      <div>
        <h2 id="dWord">é€‰æ‹©ä¸€ä¸ªè¯</h2>
        <div class="mean" id="dReading"></div>
        <div class="morph" id="dMorph"></div>
      </div>
      <div class="actions">
        <button class="btn" id="speakBtn" title="å‘éŸ³">ğŸ”Š å‘éŸ³</button>
        <button class="btn" id="starBtn" title="åŠ å…¥å¤ä¹ ">â­ æ”¶è—</button>
      </div>
    </div>
    <section>
      <div class="def" id="dDef"></div>
      <div class="mean" id="dMean"></div>
    </section>
    <section>
      <div class="kv">
        <div><small class="help">è¯æ€§</small></div><div id="dPos"></div>
        <div><small class="help">çº§åˆ«</small></div><div id="dLevel"></div>
        <div><small class="help">ä¸»é¢˜</small></div><div id="dTopics"></div>
        <div><small class="help">é¢‘ç‡</small></div><div id="dFreq"></div>
      </div>
    </section>
    <section>
      <b>ä¾‹å¥</b>
      <ul class="clean" id="dExamples"></ul>
    </section>
    <section>
      <b>å½¢è¿‘è¯ï¼ˆæ‹¼å†™ç›¸è¿‘ï¼‰</b>
      <div class="sim-list" id="dSimilar"></div>
    </section>
    <section>
      <b>åŒæ„è¯ / åŒæ¥è¾</b>
      <div class="family-list" id="dFamily"></div>
    </section>
    <section>
      <b>è®°å¿†æç¤º</b>
      <div id="dNotes" class="mean"></div>
    </section>
  </aside>
</main>

<!-- SRS Review Panel -->
<div class="srs" id="srsPanel" style="display:none">
  <div class="card">
    <div class="q" id="srsQ">SRS å¤ä¹ </div>
    <div class="a" id="srsA" style="display:none; margin-top:8px"></div>
    <div class="btns">
      <button class="btn again" id="srsAgain">Again</button>
      <button class="btn hard" id="srsHard">Hard</button>
      <button class="btn good" id="srsGood">Good</button>
      <button class="btn easy" id="srsEasy">Easy</button>
      <button class="btn" id="srsShow">æ˜¾ç¤ºç­”æ¡ˆ</button>
      <button class="btn ghost" id="srsClose">å…³é—­</button>
    </div>
    <div style="margin-top:6px"><small class="dim" id="srsInfo"></small></div>
  </div>
</div>

<script>
/** ======================
 *  è¯­è¨€ä¸æ•°æ®æº
 *  ====================== */
const DB = {
  it: [], // will fill below
  es: []  // will fill below
};
let CURRENT_LANG = 'it';

/** ======================
 *  æ„è¯è¦ç´ ï¼ˆé€šç”¨äº it/esï¼‰
 *  ====================== */
const MORPHEMES = {
  // prefixes
  "re":{type:"prefix", zh:"å†ï¼›é‡æ–°", note:"it/es"},
  "ri":{type:"prefix", zh:"å†ï¼›é‡æ–°ï¼ˆit å¸¸ç”¨ï¼‰", note:"it"},
  "pre":{type:"prefix", zh:"é¢„å…ˆï¼›åœ¨å‰", note:"it/es"},
  "anti":{type:"prefix", zh:"åï¼›æŠ—", note:"it/es"},
  "auto":{type:"prefix", zh:"è‡ªï¼›è‡ªåŠ¨", note:"it/es"},
  "bio":{type:"root", zh:"ç”Ÿå‘½", note:"it/es"},
  "geo":{type:"root", zh:"åœ°çƒï¼›åœŸåœ°", note:"it/es"},
  "tele":{type:"prefix", zh:"è¿œï¼›è¿œè·", note:"it/es"},
  "fono":{type:"root", zh:"å£°éŸ³ï¼›è¯éŸ³", note:"it/es"},
  "foto":{type:"root", zh:"å…‰ï¼›ç…§ç‰‡", note:"it/es"},
  "graf":{type:"root", zh:"å†™ï¼›ç”»ï¼›å›¾", note:"it/es"},
  "logia":{type:"suffix", zh:"â€¦å­¦ï¼›å­¦ç§‘", note:"it/es"},
  "micro":{type:"prefix", zh:"å¾®ï¼›å°", note:"it/es"},
  "macro":{type:"prefix", zh:"å®ï¼›å¤§", note:"it/es"},
  "multi":{type:"prefix", zh:"å¤šï¼›å¤šä¸ª", note:"it/es"},
  "mono":{type:"prefix", zh:"å•ï¼›å”¯ä¸€", note:"it/es"},
  "iper":{type:"prefix", zh:"è¿‡åº¦ï¼›è¶…ï¼ˆitï¼‰", note:"it"},
  "ipo":{type:"prefix", zh:"ä½ï¼›ä¸‹ï¼ˆitï¼‰", note:"it"},
  "hiper":{type:"prefix", zh:"è¿‡åº¦ï¼›è¶…ï¼ˆesï¼‰", note:"es"},
  "hipo":{type:"prefix", zh:"ä½ï¼›ä¸‹ï¼ˆesï¼‰", note:"es"},
  "inter":{type:"prefix", zh:"åœ¨â€¦ä¹‹é—´ï¼›ç›¸äº’", note:"it/es"},
  "tras":{type:"prefix", zh:"æ¨ªè¶Šï¼›ç©¿è¶Šï¼ˆitï¼‰", note:"it"},
  "trans":{type:"prefix", zh:"æ¨ªè¶Šï¼›ç©¿è¶Šï¼ˆesï¼‰", note:"es"},
  "con":{type:"prefix", zh:"å…±åŒï¼›ä¸€èµ·", note:"it/es"},
  "dis":{type:"prefix", zh:"ä¸ï¼›å¦å®šï¼›åˆ†ç¦»", note:"it/es"},
  "in":{type:"prefix", zh:"ä¸ï¼›å¦å®šï¼ˆå˜ä½“ im/ir/ilï¼‰", note:"it/es"},
  "im":{type:"prefix", zh:"ä¸ï¼›å¦å®šï¼ˆå‰ b/m/pï¼‰", note:"it/es"},
  "ir":{type:"prefix", zh:"ä¸ï¼›å¦å®šï¼ˆå‰ rï¼‰", note:"it/es"},
  "il":{type:"prefix", zh:"ä¸ï¼›å¦å®šï¼ˆå‰ lï¼‰", note:"it/es"},
  // roots (latin/intl)
  "port":{type:"root", zh:"æºå¸¦ï¼›è¿", note:"it/es"},
  "scriv":{type:"root", zh:"å†™ï¼ˆitï¼‰", note:"it"},
  "scrib":{type:"root", zh:"å†™ï¼ˆesï¼‰", note:"es"},
  "dic":{type:"root", zh:"è¯´ï¼›è¨€", note:"it/es"},
  "ved":{type:"root", zh:"çœ‹è§ï¼ˆved- itï¼‰", note:"it"},
  "vis":{type:"root", zh:"çœ‹ï¼›è§†", note:"it/es"},
  "cred":{type:"root", zh:"ä¿¡ï¼›ç›¸ä¿¡", note:"it/es"},
  "inform":{type:"root", zh:"ä¿¡æ¯ï¼›é€šçŸ¥", note:"it/es"},
  "comunic":{type:"root", zh:"äº¤æµï¼›æ²Ÿé€š", note:"it/es"},
  "organizz":{type:"root", zh:"ç»„ç»‡ï¼ˆitï¼‰", note:"it"},
  "organiz":{type:"root", zh:"ç»„ç»‡ï¼ˆesï¼‰", note:"es"},
  // suffixes
  "zione":{type:"suffix", zh:"â€¦tionï¼ˆåè¯åŒ– itï¼‰", note:"it"},
  "sione":{type:"suffix", zh:"â€¦sionï¼ˆåè¯åŒ– itï¼‰", note:"it"},
  "ciÃ³n":{type:"suffix", zh:"â€¦ciÃ³nï¼ˆåè¯åŒ– esï¼‰", note:"es"},
  "siÃ³n":{type:"suffix", zh:"â€¦siÃ³nï¼ˆåè¯åŒ– esï¼‰", note:"es"},
  "mente":{type:"suffix", zh:"å‰¯è¯åç¼€ï¼ˆâ€¦åœ°ï¼‰", note:"it/es"},
  "ale":{type:"suffix", zh:"å½¢/ååç¼€ï¼ˆâ€¦çš„/â€¦ç±»ï¼‰", note:"it"},
  "ario":{type:"suffix", zh:"å½¢/ååç¼€ï¼ˆâ€¦çš„/â€¦è€…ï¼‰", note:"it/es"},
  "ista":{type:"suffix", zh:"ä»äº‹â€¦çš„äººï¼›â€¦ä¸»ä¹‰è€…", note:"it/es"},
  "ismo":{type:"suffix", zh:"â€¦ä¸»ä¹‰ï¼›â€¦å­¦è¯´", note:"it/es"},
  "izzare":{type:"suffix", zh:"åŠ¨è¯åŒ–ï¼ˆitï¼‰", note:"it"},
  "izar":{type:"suffix", zh:"åŠ¨è¯åŒ–ï¼ˆesï¼‰", note:"es"},
  "izzazione":{type:"suffix", zh:"â€¦åŒ–ï¼ˆåè¯ itï¼‰", note:"it"},
  "izaciÃ³n":{type:"suffix", zh:"â€¦åŒ–ï¼ˆåè¯ esï¼‰", note:"es"},
  "itÃ ":{type:"suffix", zh:"â€¦æ€§ï¼›â€¦åº¦ï¼ˆitï¼‰", note:"it"},
  "idad":{type:"suffix", zh:"â€¦æ€§ï¼›â€¦åº¦ï¼ˆesï¼‰", note:"es"},
  "ivo":{type:"suffix", zh:"â€¦æ€§çš„ï¼ˆå½¢ it/esï¼‰", note:"it/es"},
  "oso":{type:"suffix", zh:"â€¦å¤šçš„/â€¦çš„ï¼ˆå½¢ it/esï¼‰", note:"it/es"},
  "osa":{type:"suffix", zh:"â€¦å¤šçš„/â€¦çš„ï¼ˆå½¢ it/esï¼‰", note:"it/es"},
  "are":{type:"suffix", zh:"åŠ¨è¯ä¸å®šå¼ï¼ˆitï¼‰", note:"it"},
  "ere":{type:"suffix", zh:"åŠ¨è¯ä¸å®šå¼ï¼ˆitï¼‰", note:"it"},
  "ire":{type:"suffix", zh:"åŠ¨è¯ä¸å®šå¼ï¼ˆitï¼‰", note:"it"},
  "ar":{type:"suffix", zh:"åŠ¨è¯ä¸å®šå¼ï¼ˆesï¼‰", note:"es"},
  "er":{type:"suffix", zh:"åŠ¨è¯ä¸å®šå¼ï¼ˆesï¼‰", note:"es"},
  "ir":{type:"suffix", zh:"åŠ¨è¯ä¸å®šå¼ï¼ˆesï¼‰", note:"es"}
};

/** ======================
 *  è¯åº“ï¼ˆç²¾ç®€ç¤ºä¾‹ï¼Œå¯å¯¼å…¥æ‰©å±•ï¼‰
 *  å­—æ®µï¼š
 *  word, pos, level[], frequency(1-5),
 *  definition_xx(it/es), meaning_zh,
 *  examples[], roots:[{m, t}], topics[], syn[], ant[], notes
 *  ====================== */

/* --------- ITALIANO --------- */
DB.it = [
  {word:"telefono",pos:"n.",level:["A1"],frequency:5,
    definition_it:"Dispositivo per chiamare a distanza.",meaning_zh:"ç”µè¯",
    examples:["Il telefono squilla spesso."],
    roots:[{m:"tele",t:"prefix"},{m:"fono",t:"root"}],
    topics:["tech"],syn:["cellulare"],ant:[],notes:"tele(è¿œ)+fono(å£°éŸ³) â†’ ç”µè¯"},
  {word:"televisione",pos:"n.",level:["A2"],frequency:4,
    definition_it:"Sistema per trasmettere immagini e suoni.",meaning_zh:"ç”µè§†",
    examples:["Guardo la televisione la sera."],
    roots:[{m:"tele",t:"prefix"},{m:"vis",t:"root"},{m:"sione",t:"suffix"}],
    topics:["tech","media"],syn:["TV"],ant:[],notes:"tele(è¿œ)+vis(çœ‹)+sione(å)"},
  {word:"microfono",pos:"n.",level:["A2"],frequency:4,
    definition_it:"Strumento che trasforma la voce in segnale elettrico.",meaning_zh:"éº¦å…‹é£",
    examples:["Parla al microfono, per favore."],
    roots:[{m:"micro",t:"prefix"},{m:"fono",t:"root"}],
    topics:["tech","audio"],syn:["mic"],ant:[],notes:"micro(å°)+fono(å£°)"},
  {word:"fotografia",pos:"n.",level:["A2"],frequency:4,
    definition_it:"Immagine ottenuta con una fotocamera.",meaning_zh:"ç…§ç‰‡ï¼›æ‘„å½±",
    examples:["Amo la fotografia di strada."],
    roots:[{m:"foto",t:"root"},{m:"graf",t:"root"},{m:"ia",t:"suffix"}],
    topics:["arte"],syn:["foto"],ant:[],notes:"foto(å…‰)+graf(å†™)"},
  {word:"biologia",pos:"n.",level:["B1"],frequency:3,
    definition_it:"Scienza che studia la vita.",meaning_zh:"ç”Ÿç‰©å­¦",
    examples:["La biologia molecolare Ã¨ affascinante."],
    roots:[{m:"bio",t:"root"},{m:"logia",t:"suffix"}],
    topics:["scienza"],syn:[],ant:[],notes:"bio(ç”Ÿ)+-logia(å­¦)"},
  {word:"geografia",pos:"n.",level:["A2"],frequency:4,
    definition_it:"Studio della Terra e dei suoi fenomeni.",meaning_zh:"åœ°ç†å­¦",
    examples:["La geografia umana analizza le culture."],
    roots:[{m:"geo",t:"root"},{m:"graf",t:"root"},{m:"ia",t:"suffix"}],
    topics:["scienza"],syn:[],ant:[],notes:"geo(åœ°)+graf(å†™)"},
  {word:"informazione",pos:"n.",level:["A2","B1"],frequency:5,
    definition_it:"Dato o notizia comunicata o ricevuta.",meaning_zh:"ä¿¡æ¯ï¼›èµ„è®¯",
    examples:["Abbiamo bisogno di piÃ¹ informazioni."],
    roots:[{m:"inform",t:"root"},{m:"azione",t:"suffix"}],
    topics:["societÃ ","IT"],syn:["notizia"],ant:[],notes:"inform(ä¿¡æ¯)+-azione(å)"},
  {word:"comunicazione",pos:"n.",level:["B1"],frequency:5,
    definition_it:"Scambio di messaggi tra individui o sistemi.",meaning_zh:"æ²Ÿé€šï¼›äº¤æµ",
    examples:["La comunicazione efficace Ã¨ fondamentale."],
    roots:[{m:"comunic",t:"root"},{m:"azione",t:"suffix"}],
    topics:["societÃ ","lavoro"],syn:[],ant:[],notes:"comunic(äº¤æµ)+-azione"},
  {word:"organizzare",pos:"v.",level:["B1"],frequency:4,
    definition_it:"Disporre ordinatamente; preparare.",meaning_zh:"ç»„ç»‡ï¼›å®‰æ’",
    examples:["Dobbiamo organizzare la riunione."],
    roots:[{m:"organizz",t:"root"},{m:"are",t:"suffix"}],
    topics:["lavoro"],syn:["preparare"],ant:[],notes:"it åŠ¨è¯ -are"},
  {word:"organizzazione",pos:"n.",level:["B1"],frequency:4,
    definition_it:"Struttura organizzata; modo di coordinare risorse.",meaning_zh:"ç»„ç»‡ï¼›ç»„ç»‡æ–¹å¼",
    examples:["L'organizzazione del progetto Ã¨ chiara."],
    roots:[{m:"organizz",t:"root"},{m:"azione",t:"suffix"}],
    topics:["lavoro","gestione"],syn:[],ant:[],notes:"-zione åè¯åŒ–"},

  // scrivere ç³»
  {word:"scrivere",pos:"v.",level:["A2"],frequency:5,
    definition_it:"Tracciare segni grafici; comporre un testo.",meaning_zh:"å†™ï¼›ä¹¦å†™",
    examples:["Ti scrivo domani."],
    roots:[{m:"scriv",t:"root"},{m:"ere",t:"suffix"}],
    topics:["studio"],syn:["redigere"],ant:[],notes:"è¯å¹² scriv-"},
  {word:"descrivere",pos:"v.",level:["B1"],frequency:4,
    definition_it:"Rappresentare con parole.",meaning_zh:"æè¿°",
    examples:["Puoi descrivere la scena?"],
    roots:[{m:"de",t:"prefix"},{m:"scriv",t:"root"},{m:"ere",t:"suffix"}],
    topics:["studio"],syn:["illustrare"],ant:[],notes:"de(ä¸‹/å®Œå…¨)+scriv"},
  {word:"iscrivere",pos:"v.",level:["B1"],frequency:3,
    definition_it:"Registrare un nome in un elenco.",meaning_zh:"ç™»è®°ï¼›æŠ¥å",
    examples:["Si Ã¨ iscritto al corso."],
    roots:[{m:"in",t:"prefix"},{m:"scriv",t:"root"},{m:"ere",t:"suffix"}],
    topics:["studio"],syn:["registrare"],ant:[],notes:"in(è¿›å…¥)+scriv"},
  {word:"prescrivere",pos:"v.",level:["B1"],frequency:3,
    definition_it:"Ordinare come norma o terapia.",meaning_zh:"è§„å®šï¼›å¼€å¤„æ–¹",
    examples:["Il medico ha prescritto un antibiotico."],
    roots:[{m:"pre",t:"prefix"},{m:"scriv",t:"root"},{m:"ere",t:"suffix"}],
    topics:["salute","legge"],syn:["ordinare"],ant:["proscrivere"],notes:"pre(é¢„)+scriv"},
  {word:"trascrivere",pos:"v.",level:["B2"],frequency:3,
    definition_it:"Copiare un testo; convertire in altra grafia.",meaning_zh:"æŠ„å†™ï¼›è½¬å†™",
    examples:["Trascrivi l'audio in testo."],
    roots:[{m:"tras",t:"prefix"},{m:"scriv",t:"root"},{m:"ere",t:"suffix"}],
    topics:["studio","IT"],syn:["copiare"],ant:[],notes:"tras(è·¨è¶Š)+scriv"},
  {word:"descrizione",pos:"n.",level:["B1"],frequency:4,
    definition_it:"Rappresentazione a parole.",meaning_zh:"æè¿°",
    examples:["La descrizione Ã¨ dettagliata."],
    roots:[{m:"de",t:"prefix"},{m:"scriv",t:"root"},{m:"zione",t:"suffix"}],
    topics:["studio"],syn:["ritratto"],ant:[],notes:"-zione åè¯"},
  {word:"iscrizione",pos:"n.",level:["B1"],frequency:4,
    definition_it:"Azione di iscrivere; registrazione.",meaning_zh:"æŠ¥åï¼›ç™»è®°",
    examples:["L'iscrizione scade venerdÃ¬."],
    roots:[{m:"in",t:"prefix"},{m:"scriv",t:"root"},{m:"zione",t:"suffix"}],
    topics:["studio","amministrazione"],syn:["registrazione"],ant:[],notes:"in+scriv+zione"},
  {word:"trascrizione",pos:"n.",level:["B2"],frequency:3,
    definition_it:"Risultato del trascrivere.",meaning_zh:"æŠ„æœ¬ï¼›è½¬å†™",
    examples:["Controlla la trascrizione."],
    roots:[{m:"tras",t:"prefix"},{m:"scriv",t:"root"},{m:"zione",t:"suffix"}],
    topics:["studio","IT"],syn:[],ant:[],notes:"tras- + scriv + -zione"},

  // portare ç³»
  {word:"portare",pos:"v.",level:["A2"],frequency:5,
    definition_it:"Trasferire con sÃ©; avere addosso.",meaning_zh:"å¸¦ï¼›æºå¸¦ï¼›ç©¿æˆ´",
    examples:["Porto sempre l'ombrello."],
    roots:[{m:"port",t:"root"},{m:"are",t:"suffix"}],
    topics:["generale"],syn:["trasportare"],ant:[],notes:"è¯å¹² port-"},
  {word:"importare",pos:"v.",level:["B1"],frequency:4,
    definition_it:"Portare dentro da fuori; avere importanza.",meaning_zh:"è¿›å£ï¼›è¦ç´§",
    examples:["L'azienda importa caffÃ¨."],
    roots:[{m:"im",t:"prefix"},{m:"port",t:"root"},{m:"are",t:"suffix"}],
    topics:["economia"],syn:["introdurre"],ant:["esportare"],notes:"im(å…¥)+port"},
  {word:"esportare",pos:"v.",level:["B1"],frequency:4,
    definition_it:"Spedire all'estero per la vendita.",meaning_zh:"å‡ºå£ï¼›è¾“å‡º",
    examples:["Esportiamo vino in Europa."],
    roots:[{m:"ex",t:"prefix"},{m:"port",t:"root"},{m:"are",t:"suffix"}],
    topics:["economia"],syn:[],ant:["importare"],notes:"ex(å‡º)+port"},
  {word:"trasportare",pos:"v.",level:["B1"],frequency:4,
    definition_it:"Portare da un luogo a un altro.",meaning_zh:"è¿è¾“ï¼›è¿é€",
    examples:["Trasportiamo merci via treno."],
    roots:[{m:"tras",t:"prefix"},{m:"port",t:"root"},{m:"are",t:"suffix"}],
    topics:["logistica"],syn:["spostare"],ant:[],notes:"tras(è·¨)+port"},
  {word:"trasporto",pos:"n.",level:["B1"],frequency:4,
    definition_it:"Azione di trasportare; sistema di trasporto.",meaning_zh:"è¿è¾“ï¼›äº¤é€š",
    examples:["I trasporti pubblici sono efficienti."],
    roots:[{m:"tras",t:"prefix"},{m:"port",t:"root"}],
    topics:["logistica"],syn:["trasferimento"],ant:[],notes:"åè¯å½¢å¼"},
  {word:"supporto",pos:"n.",level:["B1"],frequency:4,
    definition_it:"Sostegno materiale o morale; base su cui si appoggia.",meaning_zh:"æ”¯æŒï¼›æ”¯æ’‘ï¼›è½½ä½“",
    examples:["Grazie per il supporto tecnico."],
    roots:[{m:"sub",t:"prefix"},{m:"port",t:"root"}],
    topics:["lavoro","IT"],syn:["sostegno"],ant:["ostacolo"],notes:"sub(ä¸‹)+port(æ‰¿)"},
  {word:"passaporto",pos:"n.",level:["A2"],frequency:4,
    definition_it:"Documento per viaggiare all'estero.",meaning_zh:"æŠ¤ç…§",
    examples:["Il passaporto Ã¨ scaduto."],
    roots:[{m:"passa",t:"root"},{m:"port",t:"root"}],
    topics:["viaggio"],syn:[],ant:[],notes:"passa(é€šè¡Œ)+port(æº)"},
  
  // å¯é€†å‰ç¼€ in-/im-/ir-/il-/dis-
  {word:"possibile",pos:"adj.",level:["A2"],frequency:5,
    definition_it:"Che si puÃ² fare o verificare.",meaning_zh:"å¯èƒ½çš„",
    examples:["Ãˆ possibile domani?" ],
    roots:[{m:"poss",t:"root"}],
    topics:["generale"],syn:["realizzabile"],ant:["impossibile"],notes:"åä¹‰ç”¨ im-"},
  {word:"impossibile",pos:"adj.",level:["A2"],frequency:5,
    definition_it:"Che non si puÃ² fare o verificare.",meaning_zh:"ä¸å¯èƒ½çš„",
    examples:["Ãˆ impossibile finire oggi."],
    roots:[{m:"im",t:"prefix"},{m:"poss",t:"root"}],
    topics:["generale"],syn:[],ant:["possibile"],notes:"im- å¦å®š"},
  {word:"utile",pos:"adj.",level:["A2"],frequency:5,
    definition_it:"Che serve a uno scopo.",meaning_zh:"æœ‰ç”¨çš„",
    examples:["Questa guida Ã¨ utile."],
    roots:[{m:"ut",t:"root"}],
    topics:["generale"],syn:["vantaggioso"],ant:["inutile"],notes:""},
  {word:"inutile",pos:"adj.",level:["A2"],frequency:4,
    definition_it:"Che non serve; vano.",meaning_zh:"æ— ç”¨çš„",
    examples:["Ãˆ inutile discutere ora."],
    roots:[{m:"in",t:"prefix"},{m:"ut",t:"root"}],
    topics:["generale"],syn:["vano"],ant:["utile"],notes:"in- å¦å®š"},
  {word:"legale",pos:"adj.",level:["B1"],frequency:4,
    definition_it:"Conforme alla legge.",meaning_zh:"åˆæ³•çš„ï¼›æ³•å¾‹çš„",
    examples:["Ãˆ un contratto legale."],
    roots:[{m:"leg",t:"root"},{m:"ale",t:"suffix"}],
    topics:["legge"],syn:["lecito"],ant:["illegale"],notes:"-ale å½¢å®¹åç¼€"},
  {word:"illegale",pos:"adj.",level:["B1"],frequency:4,
    definition_it:"Contrario alla legge.",meaning_zh:"éæ³•çš„",
    examples:["Traffico illegale."],
    roots:[{m:"il",t:"prefix"},{m:"leg",t:"root"},{m:"ale",t:"suffix"}],
    topics:["legge"],syn:["illecito"],ant:["legale"],notes:"il- å¦å®šï¼ˆå‰ lï¼‰"},
  {word:"regolare",pos:"adj.",level:["B1"],frequency:4,
    definition_it:"Conforme alla regola; periodico.",meaning_zh:"è§„åˆ™çš„ï¼›æœ‰è§„å¾‹çš„",
    examples:["Controlli regolari sono necessari."],
    roots:[{m:"regol",t:"root"},{m:"are",t:"suffix"}],
    topics:["lavoro"],syn:["periodico"],ant:["irregolare"],notes:""},
  {word:"irregolare",pos:"adj.",level:["B1"],frequency:4,
    definition_it:"Non conforme alla regola.",meaning_zh:"ä¸è§„åˆ™çš„ï¼›ä¸åˆè§„çš„",
    examples:["Un verbo irregolare."],
    roots:[{m:"ir",t:"prefix"},{m:"regol",t:"root"},{m:"are",t:"suffix"}],
    topics:["studio"],syn:[],ant:["regolare"],notes:"ir- å¦å®šï¼ˆå‰ rï¼‰"},
  {word:"visibile",pos:"adj.",level:["A2"],frequency:4,
    definition_it:"Che si puÃ² vedere.",meaning_zh:"å¯è§çš„",
    examples:["Un miglioramento visibile."],
    roots:[{m:"vis",t:"root"}],
    topics:["scienza"],syn:["percepibile"],ant:["invisibile"],notes:""},
  {word:"invisibile",pos:"adj.",level:["B1"],frequency:3,
    definition_it:"Che non si puÃ² vedere.",meaning_zh:"ä¸å¯è§çš„ï¼›æ— å½¢çš„",
    examples:["Forze invisibili."],
    roots:[{m:"in",t:"prefix"},{m:"vis",t:"root"}],
    topics:["scienza"],syn:[],ant:["visibile"],notes:"in- å¦å®š"},
  {word:"attivo",pos:"adj.",level:["A2"],frequency:4,
    definition_it:"Operante; energico.",meaning_zh:"æ´»è·ƒçš„ï¼›ä¸»åŠ¨çš„",
    examples:["Un ruolo attivo."],
    roots:[{m:"att",t:"root"},{m:"ivo",t:"suffix"}],
    topics:["lavoro"],syn:["dinamico"],ant:["inattivo"],notes:"-ivo å½¢å®¹è¯"},
  {word:"inattivo",pos:"adj.",level:["B1"],frequency:3,
    definition_it:"Non operante; fermo.",meaning_zh:"ä¸æ´»è·ƒçš„ï¼›é—²ç½®çš„",
    examples:["Vulcano inattivo."],
    roots:[{m:"in",t:"prefix"},{m:"att",t:"root"},{m:"ivo",t:"suffix"}],
    topics:["scienza"],syn:["inerte"],ant:["attivo"],notes:""},

  // avverbi -mente
  {word:"chiaramente",pos:"adv.",level:["B1"],frequency:4,
    definition_it:"In modo chiaro.",meaning_zh:"æ¸…æ¥šåœ°ï¼›æ˜¾ç„¶",
    examples:["Ãˆ chiaramente un vantaggio."],
    roots:[{m:"chiara",t:"root"},{m:"mente",t:"suffix"}],
    topics:["scrittura"],syn:["ovviamente"],ant:[],notes:"-mente å‰¯è¯"},
  {word:"facilmente",pos:"adv.",level:["A2"],frequency:4,
    definition_it:"Con facilitÃ .",meaning_zh:"å®¹æ˜“åœ°",
    examples:["Si puÃ² risolvere facilmente."],
    roots:[{m:"fac",t:"root"},{m:"mente",t:"suffix"}],
    topics:["studio"],syn:["agevolmente"],ant:["difficilmente"],notes:""},
  {word:"probabilmente",pos:"adv.",level:["B1"],frequency:4,
    definition_it:"Con alta probabilitÃ .",meaning_zh:"å¾ˆå¯èƒ½ï¼›å¤§æ¦‚",
    examples:["Probabilmente pioverÃ ."],
    roots:[{m:"probabil",t:"root"},{m:"mente",t:"suffix"}],
    topics:["generale"],syn:["forse"],ant:[],notes:""},

  // studio/lavoro/viaggio
  {word:"universitÃ ",pos:"n.",level:["A2"],frequency:5,
    definition_it:"Istituzione di istruzione superiore.",meaning_zh:"å¤§å­¦",
    examples:["Studio all'universitÃ ."],
    roots:[{m:"univers",t:"root"}],
    topics:["studio"],syn:[],ant:[],notes:""},
  {word:"studente",pos:"n.",level:["A1"],frequency:5,
    definition_it:"Persona che studia.",meaning_zh:"å­¦ç”Ÿ",
    examples:["Lo studente Ã¨ diligente."],
    roots:[{m:"stud",t:"root"}],
    topics:["studio"],syn:["allievo"],ant:[],notes:""},
  {word:"studiare",pos:"v.",level:["A1"],frequency:5,
    definition_it:"Applicarsi allo studio.",meaning_zh:"å­¦ä¹ ï¼›ç ”ç©¶",
    examples:["Studio l'italiano."],
    roots:[{m:"stud",t:"root"},{m:"are",t:"suffix"}],
    topics:["studio"],syn:["imparare"],ant:[],notes:""},
  {word:"lezione",pos:"n.",level:["A1"],frequency:5,
    definition_it:"UnitÃ  di insegnamento.",meaning_zh:"è¯¾ï¼›è¯¾ç¨‹",
    examples:["La lezione inizia alle nove."],
    roots:[{m:"lez",t:"root"},{m:"ione",t:"suffix"}],
    topics:["studio"],syn:["corso"],ant:[],notes:""},
  {word:"esame",pos:"n.",level:["A2"],frequency:5,
    definition_it:"Prova di valutazione.",meaning_zh:"è€ƒè¯•",
    examples:["L'esame Ã¨ domani."],
    roots:[{m:"esam",t:"root"}],
    topics:["studio"],syn:["test"],ant:[],notes:""},
  {word:"ricerca",pos:"n.",level:["B1"],frequency:4,
    definition_it:"Indagine sistematica per scoprire fatti.",meaning_zh:"ç ”ç©¶ï¼›è°ƒæŸ¥",
    examples:["Ricerca scientifica."],
    roots:[{m:"ricerc",t:"root"}],
    topics:["scienza","studio"],syn:["indagine"],ant:[],notes:""},

  {word:"lavoro",pos:"n.",level:["A1"],frequency:5,
    definition_it:"AttivitÃ  retribuita; opera.",meaning_zh:"å·¥ä½œï¼›åŠ³åŠ¨",
    examples:["Cerca lavoro in cittÃ ."],
    roots:[{m:"lavor",t:"root"}],
    topics:["lavoro"],syn:["occupazione"],ant:[],notes:""},
  {word:"azienda",pos:"n.",level:["A2"],frequency:4,
    definition_it:"Impresa economica.",meaning_zh:"å…¬å¸ï¼›ä¼ä¸š",
    examples:["L'azienda assume personale."],
    roots:[{m:"aziend",t:"root"}],
    topics:["business"],syn:["impresa"],ant:[],notes:""},
  {word:"progetto",pos:"n.",level:["A2"],frequency:4,
    definition_it:"Piano di lavoro.",meaning_zh:"é¡¹ç›®ï¼›æ–¹æ¡ˆ",
    examples:["Un progetto internazionale."],
    roots:[{m:"progett",t:"root"}],
    topics:["lavoro"],syn:["piano"],ant:[],notes:""},
  {word:"riunione",pos:"n.",level:["A2"],frequency:4,
    definition_it:"Incontro di lavoro.",meaning_zh:"ä¼šè®®",
    examples:["C'Ã¨ una riunione alle tre."],
    roots:[{m:"ri",t:"prefix"},{m:"un",t:"root"},{m:"ione",t:"suffix"}],
    topics:["lavoro"],syn:["meeting"],ant:[],notes:"ri- å†/èš"},
  {word:"contratto",pos:"n.",level:["B1"],frequency:4,
    definition_it:"Accordo giuridico.",meaning_zh:"åˆåŒï¼›å¥‘çº¦",
    examples:["Firmiamo il contratto."],
    roots:[{m:"contratt",t:"root"}],
    topics:["legge","business"],syn:["accordo"],ant:[],notes:""},
  {word:"stipendio",pos:"n.",level:["B1"],frequency:4,
    definition_it:"Retribuzione del lavoro.",meaning_zh:"è–ªæ°´ï¼›å·¥èµ„",
    examples:["Lo stipendio Ã¨ mensile."],
    roots:[{m:"stipend",t:"root"}],
    topics:["lavoro","economia"],syn:["salario"],ant:[],notes:""},

  {word:"prenotare",pos:"v.",level:["A2"],frequency:4,
    definition_it:"Riservare in anticipo.",meaning_zh:"é¢„è®¢ï¼›é¢„çº¦",
    examples:["Ho prenotato un tavolo."],
    roots:[{m:"pre",t:"prefix"},{m:"not",t:"root"},{m:"are",t:"suffix"}],
    topics:["viaggio","vita"],syn:["riservare"],ant:[],notes:"pre- é¢„å…ˆ"},
  {word:"prenotazione",pos:"n.",level:["A2"],frequency:4,
    definition_it:"Atto del prenotare.",meaning_zh:"é¢„è®¢ï¼›é¢„çº¦",
    examples:["La prenotazione Ã¨ confermata."],
    roots:[{m:"pre",t:"prefix"},{m:"not",t:"root"},{m:"zione",t:"suffix"}],
    topics:["viaggio","vita"],syn:["riserva"],ant:[],notes:"-zione åè¯åŒ–"},
  {word:"biglietto",pos:"n.",level:["A1"],frequency:5,
    definition_it:"Titolo per entrare o viaggiare.",meaning_zh:"ç¥¨ï¼›è½¦ç¥¨",
    examples:["Compra il biglietto online."],
    roots:[{m:"bigliett",t:"root"},{m:"o",t:"suffix"}],
    topics:["viaggio"],syn:["ticket"],ant:[],notes:""},
  {word:"viaggio",pos:"n.",level:["A1"],frequency:5,
    definition_it:"Spostamento verso un luogo.",meaning_zh:"æ—…è¡Œ",
    examples:["Buon viaggio!"],
    roots:[{m:"viagg",t:"root"}],
    topics:["viaggio"],syn:["tour"],ant:[],notes:""},
  {word:"stazione",pos:"n.",level:["A1"],frequency:5,
    definition_it:"Luogo di fermata dei treni.",meaning_zh:"è½¦ç«™ï¼›ç«è½¦ç«™",
    examples:["Ci vediamo in stazione."],
    roots:[{m:"staz",t:"root"},{m:"ione",t:"suffix"}],
    topics:["viaggio"],syn:["fermata"],ant:[],notes:""},
  {word:"aeroporto",pos:"n.",level:["A2"],frequency:5,
    definition_it:"Infrastruttura per il traffico aereo.",meaning_zh:"æœºåœº",
    examples:["L'aeroporto Ã¨ lontano."],
    roots:[{m:"aero",t:"root"},{m:"port",t:"root"}],
    topics:["viaggio"],syn:["scalo"],ant:[],notes:"aero(ç©º)+port(è¿)"}
];

/* --------- ESPAÃ‘OL --------- */
DB.es = [
  {word:"telÃ©fono",pos:"n.",level:["A1"],frequency:5,
    definition_es:"Dispositivo para hablar a distancia.",meaning_zh:"ç”µè¯",
    examples:["El telÃ©fono suena a menudo."],
    roots:[{m:"tele",t:"prefix"},{m:"fono",t:"root"}],
    topics:["tech"],syn:["mÃ³vil"],ant:[],notes:"tele(è¿œ)+fono(å£°)"},
  {word:"televisiÃ³n",pos:"n.",level:["A2"],frequency:4,
    definition_es:"Sistema para transmitir imÃ¡genes y sonido.",meaning_zh:"ç”µè§†",
    examples:["Veo la televisiÃ³n por la noche."],
    roots:[{m:"tele",t:"prefix"},{m:"vis",t:"root"},{m:"siÃ³n",t:"suffix"}],
    topics:["tech","media"],syn:["TV"],ant:[],notes:"tele+vis+siÃ³n"},
  {word:"micrÃ³fono",pos:"n.",level:["A2"],frequency:4,
    definition_es:"Aparato que convierte la voz en seÃ±al elÃ©ctrica.",meaning_zh:"éº¦å…‹é£",
    examples:["Habla al micrÃ³fono, por favor."],
    roots:[{m:"micro",t:"prefix"},{m:"fono",t:"root"}],
    topics:["tech","audio"],syn:["micro"],ant:[],notes:"micro+fono"},
  {word:"fotografÃ­a",pos:"n.",level:["A2"],frequency:4,
    definition_es:"Imagen obtenida con una cÃ¡mara.",meaning_zh:"ç…§ç‰‡ï¼›æ‘„å½±",
    examples:["Me gusta la fotografÃ­a urbana."],
    roots:[{m:"foto",t:"root"},{m:"graf",t:"root"},{m:"Ã­a",t:"suffix"}],
    topics:["arte"],syn:["foto"],ant:[],notes:"foto+grafÃ­a"},
  {word:"biologÃ­a",pos:"n.",level:["B1"],frequency:3,
    definition_es:"Ciencia que estudia la vida.",meaning_zh:"ç”Ÿç‰©å­¦",
    examples:["La biologÃ­a molecular es fascinante."],
    roots:[{m:"bio",t:"root"},{m:"logia",t:"suffix"}],
    topics:["ciencia"],syn:[],ant:[],notes:"bio+logÃ­a"},
  {word:"geografÃ­a",pos:"n.",level:["A2"],frequency:4,
    definition_es:"Estudio de la Tierra y sus fenÃ³menos.",meaning_zh:"åœ°ç†å­¦",
    examples:["La geografÃ­a humana analiza las culturas."],
    roots:[{m:"geo",t:"root"},{m:"graf",t:"root"},{m:"Ã­a",t:"suffix"}],
    topics:["ciencia"],syn:[],ant:[],notes:"geo+grafÃ­a"},
  {word:"informaciÃ³n",pos:"n.",level:["A2","B1"],frequency:5,
    definition_es:"Dato o noticia comunicada o recibida.",meaning_zh:"ä¿¡æ¯ï¼›èµ„è®¯",
    examples:["Necesitamos mÃ¡s informaciÃ³n."],
    roots:[{m:"inform",t:"root"},{m:"ciÃ³n",t:"suffix"}],
    topics:["sociedad","IT"],syn:["noticia"],ant:[],notes:"inform+ciÃ³n"},
  {word:"comunicaciÃ³n",pos:"n.",level:["B1"],frequency:5,
    definition_es:"Intercambio de mensajes entre personas o sistemas.",meaning_zh:"æ²Ÿé€šï¼›äº¤æµ",
    examples:["La comunicaciÃ³n efectiva es clave."],
    roots:[{m:"comunic",t:"root"},{m:"aciÃ³n",t:"suffix"}],
    topics:["sociedad","trabajo"],syn:[],ant:[],notes:"comunic+aciÃ³n"},
  {word:"organizar",pos:"v.",level:["B1"],frequency:4,
    definition_es:"Disponer ordenadamente; preparar.",meaning_zh:"ç»„ç»‡ï¼›å®‰æ’",
    examples:["Tenemos que organizar la reuniÃ³n."],
    roots:[{m:"organiz",t:"root"},{m:"ar",t:"suffix"}],
    topics:["trabajo"],syn:["preparar"],ant:[],notes:"-ar åŠ¨è¯"},
  {word:"organizaciÃ³n",pos:"n.",level:["B1"],frequency:4,
    definition_es:"Estructura organizada; modo de coordinar recursos.",meaning_zh:"ç»„ç»‡ï¼›ç»„ç»‡æ–¹å¼",
    examples:["La organizaciÃ³n del proyecto es clara."],
    roots:[{m:"organiz",t:"root"},{m:"aciÃ³n",t:"suffix"}],
    topics:["trabajo","gestiÃ³n"],syn:[],ant:[],notes:"-ciÃ³n åè¯åŒ–"},

  // escribir ç³»
  {word:"escribir",pos:"v.",level:["A2"],frequency:5,
    definition_es:"Trazar signos; componer un texto.",meaning_zh:"å†™ï¼›ä¹¦å†™",
    examples:["Te escribo maÃ±ana."],
    roots:[{m:"scrib",t:"root"},{m:"ir",t:"suffix"}],
    topics:["estudio"],syn:["redactar"],ant:[],notes:"è¯å¹² escrib-"},
  {word:"describir",pos:"v.",level:["B1"],frequency:4,
    definition_es:"Representar con palabras.",meaning_zh:"æè¿°",
    examples:["Â¿Puedes describir la escena?"],
    roots:[{m:"de",t:"prefix"},{m:"scrib",t:"root"},{m:"ir",t:"suffix"}],
    topics:["estudio"],syn:["ilustrar"],ant:[],notes:"de+scrib"},
  {word:"inscribir",pos:"v.",level:["B1"],frequency:3,
    definition_es:"Registrar un nombre en una lista.",meaning_zh:"ç™»è®°ï¼›æŠ¥å",
    examples:["Se inscribiÃ³ en el curso."],
    roots:[{m:"in",t:"prefix"},{m:"scrib",t:"root"},{m:"ir",t:"suffix"}],
    topics:["estudio"],syn:["registrar"],ant:[],notes:"in+scrib"},
  {word:"prescribir",pos:"v.",level:["B1"],frequency:3,
    definition_es:"Ordenar como norma o terapia.",meaning_zh:"è§„å®šï¼›å¼€å¤„æ–¹",
    examples:["El mÃ©dico prescribiÃ³ un antibiÃ³tico."],
    roots:[{m:"pre",t:"prefix"},{m:"scrib",t:"root"},{m:"ir",t:"suffix"}],
    topics:["salud","ley"],syn:["ordenar"],ant:["proscribir"],notes:"pre+scrib"},
  {word:"transcribir",pos:"v.",level:["B2"],frequency:3,
    definition_es:"Copiar un texto; convertir a otra grafÃ­a.",meaning_zh:"æŠ„å†™ï¼›è½¬å†™",
    examples:["Transcribe el audio a texto."],
    roots:[{m:"trans",t:"prefix"},{m:"scrib",t:"root"},{m:"ir",t:"suffix"}],
    topics:["estudio","IT"],syn:["copiar"],ant:[],notes:"trans+scrib"},
  {word:"descripciÃ³n",pos:"n.",level:["B1"],frequency:4,
    definition_es:"AcciÃ³n y efecto de describir.",meaning_zh:"æè¿°",
    examples:["La descripciÃ³n es detallada."],
    roots:[{m:"de",t:"prefix"},{m:"scrib",t:"root"},{m:"ciÃ³n",t:"suffix"}],
    topics:["estudio"],syn:["retrato"],ant:[],notes:"-ciÃ³n åè¯"},
  {word:"inscripciÃ³n",pos:"n.",level:["B1"],frequency:4,
    definition_es:"AcciÃ³n y efecto de inscribir.",meaning_zh:"æŠ¥åï¼›ç™»è®°",
    examples:["La inscripciÃ³n cierra el viernes."],
    roots:[{m:"in",t:"prefix"},{m:"scrib",t:"root"},{m:"ciÃ³n",t:"suffix"}],
    topics:["estudio","administraciÃ³n"],syn:["registro"],ant:[],notes:"in+scrib+ciÃ³n"},
  {word:"transcripciÃ³n",pos:"n.",level:["B2"],frequency:3,
    definition_es:"AcciÃ³n y efecto de transcribir.",meaning_zh:"æŠ„æœ¬ï¼›è½¬å†™",
    examples:["Revisa la transcripciÃ³n."],
    roots:[{m:"trans",t:"prefix"},{m:"scrib",t:"root"},{m:"ciÃ³n",t:"suffix"}],
    topics:["estudio","IT"],syn:[],ant:[],notes:"trans+scrib+ciÃ³n"},

  // portar ç³»
  {word:"importar",pos:"v.",level:["B1"],frequency:4,
    definition_es:"Traer de fuera para vender; ser importante.",meaning_zh:"è¿›å£ï¼›è¦ç´§",
    examples:["La empresa importa cafÃ©."],
    roots:[{m:"im",t:"prefix"},{m:"port",t:"root"},{m:"ar",t:"suffix"}],
    topics:["economÃ­a"],syn:["introducir"],ant:["exportar"],notes:"im(å…¥)+port"},
  {word:"exportar",pos:"v.",level:["B1"],frequency:4,
    definition_es:"Enviar fuera para vender.",meaning_zh:"å‡ºå£ï¼›è¾“å‡º",
    examples:["Exportamos vino a Europa."],
    roots:[{m:"ex",t:"prefix"},{m:"port",t:"root"},{m:"ar",t:"suffix"}],
    topics:["economÃ­a"],syn:[],ant:["importar"],notes:"ex(å‡º)+port"},
  {word:"transportar",pos:"v.",level:["B1"],frequency:4,
    definition_es:"Llevar de un lugar a otro.",meaning_zh:"è¿è¾“ï¼›è¿é€",
    examples:["Transportan mercancÃ­as por tren."],
    roots:[{m:"trans",t:"prefix"},{m:"port",t:"root"},{m:"ar",t:"suffix"}],
    topics:["logÃ­stica"],syn:["trasladar"],ant:[],notes:"trans+port"},
  {word:"transporte",pos:"n.",level:["B1"],frequency:4,
    definition_es:"AcciÃ³n de transportar; sistema de transporte.",meaning_zh:"è¿è¾“ï¼›äº¤é€š",
    examples:["El transporte pÃºblico es eficiente."],
    roots:[{m:"trans",t:"prefix"},{m:"port",t:"root"}],
    topics:["logÃ­stica"],syn:["traslado"],ant:[],notes:"åè¯å½¢å¼"},
  {word:"soporte",pos:"n.",level:["B1"],frequency:4,
    definition_es:"Apoyo material o moral; base de sostÃ©n.",meaning_zh:"æ”¯æŒï¼›æ”¯æ’‘ï¼›è½½ä½“",
    examples:["Gracias por el soporte tÃ©cnico."],
    roots:[{m:"sub",t:"prefix"},{m:"port",t:"root"}],
    topics:["trabajo","IT"],syn:["apoyo"],ant:["obstÃ¡culo"],notes:"sub(ä¸‹)+port(æ‰¿)"},
  {word:"pasaporte",pos:"n.",level:["A2"],frequency:4,
    definition_es:"Documento para viajar al extranjero.",meaning_zh:"æŠ¤ç…§",
    examples:["El pasaporte estÃ¡ vencido."],
    roots:[{m:"pasa",t:"root"},{m:"port",t:"root"}],
    topics:["viaje"],syn:[],ant:[],notes:"pasa(é€šè¡Œ)+port"},

  // å¯é€†å‰ç¼€
  {word:"posible",pos:"adj.",level:["A2"],frequency:5,
    definition_es:"Que puede hacerse o suceder.",meaning_zh:"å¯èƒ½çš„",
    examples:["Â¿Es posible maÃ±ana?"],
    roots:[{m:"pos",t:"root"}],
    topics:["general"],syn:["viable"],ant:["imposible"],notes:""},
  {word:"imposible",pos:"adj.",level:["A2"],frequency:5,
    definition_es:"Que no puede hacerse o suceder.",meaning_zh:"ä¸å¯èƒ½çš„",
    examples:["Es imposible terminar hoy."],
    roots:[{m:"im",t:"prefix"},{m:"pos",t:"root"}],
    topics:["general"],syn:[],ant:["posible"],notes:"im- å¦å®š"},
  {word:"Ãºtil",pos:"adj.",level:["A2"],frequency:5,
    definition_es:"Que sirve para un fin.",meaning_zh:"æœ‰ç”¨çš„",
    examples:["Esta guÃ­a es Ãºtil."],
    roots:[{m:"ut",t:"root"}],
    topics:["general"],syn:["provechoso"],ant:["inÃºtil"],notes:""},
  {word:"inÃºtil",pos:"adj.",level:["A2"],frequency:4,
    definition_es:"Que no sirve; vano.",meaning_zh:"æ— ç”¨çš„",
    examples:["Es inÃºtil discutir ahora."],
    roots:[{m:"in",t:"prefix"},{m:"ut",t:"root"}],
    topics:["general"],syn:["vano"],ant:["Ãºtil"],notes:""},
  {word:"legal",pos:"adj.",level:["B1"],frequency:4,
    definition_es:"Conforme a la ley.",meaning_zh:"åˆæ³•çš„ï¼›æ³•å¾‹çš„",
    examples:["Es un contrato legal."],
    roots:[{m:"leg",t:"root"},{m:"al",t:"suffix"}],
    topics:["ley"],syn:["lÃ­cito"],ant:["ilegal"],notes:"-al å½¢å®¹åç¼€"},
  {word:"ilegal",pos:"adj.",level:["B1"],frequency:4,
    definition_es:"Contrario a la ley.",meaning_zh:"éæ³•çš„",
    examples:["TrÃ¡fico ilegal."],
    roots:[{m:"i",t:"prefix"},{m:"leg",t:"root"},{m:"al",t:"suffix"}],
    topics:["ley"],syn:["ilÃ­cito"],ant:["legal"],notes:"i- å¦å®šï¼ˆå‰ lï¼‰"},
  {word:"regular",pos:"adj.",level:["B1"],frequency:4,
    definition_es:"Conforme a regla; periÃ³dico.",meaning_zh:"è§„åˆ™çš„ï¼›æœ‰è§„å¾‹çš„",
    examples:["Revisiones regulares son necesarias."],
    roots:[{m:"regul",t:"root"},{m:"ar",t:"suffix"}],
    topics:["trabajo"],syn:["periÃ³dico"],ant:["irregular"],notes:""},
  {word:"irregular",pos:"adj.",level:["B1"],frequency:4,
    definition_es:"No conforme a la regla.",meaning_zh:"ä¸è§„åˆ™çš„ï¼›ä¸åˆè§„çš„",
    examples:["Un verbo irregular."],
    roots:[{m:"ir",t:"prefix"},{m:"regul",t:"root"},{m:"ar",t:"suffix"}],
    topics:["estudio"],syn:[],ant:["regular"],notes:""},

  {word:"visible",pos:"adj.",level:["A2"],frequency:4,
    definition_es:"Que puede verse.",meaning_zh:"å¯è§çš„",
    examples:["Una mejora visible."],
    roots:[{m:"vis",t:"root"}],
    topics:["ciencia"],syn:["perceptible"],ant:["invisible"],notes:""},
  {word:"invisible",pos:"adj.",level:["B1"],frequency:3,
    definition_es:"Que no puede verse.",meaning_zh:"ä¸å¯è§çš„ï¼›æ— å½¢çš„",
    examples:["Fuerzas invisibles."],
    roots:[{m:"in",t:"prefix"},{m:"vis",t:"root"}],
    topics:["ciencia"],syn:[],ant:["visible"],notes:""},
  {word:"activo",pos:"adj.",level:["A2"],frequency:4,
    definition_es:"Que obra; en funcionamiento.",meaning_zh:"æ´»è·ƒçš„ï¼›ä¸»åŠ¨çš„",
    examples:["Un papel activo."],
    roots:[{m:"act",t:"root"},{m:"ivo",t:"suffix"}],
    topics:["trabajo"],syn:["dinÃ¡mico"],ant:["inactivo"],notes:""},
  {word:"inactivo",pos:"adj.",level:["B1"],frequency:3,
    definition_es:"Que no obra; detenido.",meaning_zh:"ä¸æ´»è·ƒçš„ï¼›é—²ç½®çš„",
    examples:["VolcÃ¡n inactivo."],
    roots:[{m:"in",t:"prefix"},{m:"act",t:"root"},{m:"ivo",t:"suffix"}],
    topics:["ciencia"],syn:["inerte"],ant:["activo"],notes:""},

  // adverbios -mente
  {word:"claramente",pos:"adv.",level:["B1"],frequency:4,
    definition_es:"De manera clara.",meaning_zh:"æ¸…æ¥šåœ°ï¼›æ˜¾ç„¶",
    examples:["Es claramente una ventaja."],
    roots:[{m:"clara",t:"root"},{m:"mente",t:"suffix"}],
    topics:["escritura"],syn:["obviamente"],ant:[],notes:"-mente å‰¯è¯"},
  {word:"fÃ¡cilmente",pos:"adv.",level:["A2"],frequency:4,
    definition_es:"Con facilidad.",meaning_zh:"å®¹æ˜“åœ°",
    examples:["Se puede resolver fÃ¡cilmente."],
    roots:[{m:"fÃ¡cil",t:"root"},{m:"mente",t:"suffix"}],
    topics:["estudio"],syn:["cÃ³modamente"],ant:["difÃ­cilmente"],notes:""},
  {word:"probablemente",pos:"adv.",level:["B1"],frequency:4,
    definition_es:"Con alta probabilidad.",meaning_zh:"å¾ˆå¯èƒ½ï¼›å¤§æ¦‚",
    examples:["Probablemente lloverÃ¡."],
    roots:[{m:"probable",t:"root"},{m:"mente",t:"suffix"}],
    topics:["general"],syn:["quizÃ¡"],ant:[],notes:""},

  // estudio/trabajo/viaje
  {word:"universidad",pos:"n.",level:["A2"],frequency:5,
    definition_es:"InstituciÃ³n de educaciÃ³n superior.",meaning_zh:"å¤§å­¦",
    examples:["Estudio en la universidad."],
    roots:[{m:"univers",t:"root"},{m:"idad",t:"suffix"}],
    topics:["estudio"],syn:[],ant:[],notes:"-idad åè¯åç¼€"},
  {word:"estudiante",pos:"n.",level:["A1"],frequency:5,
    definition_es:"Persona que estudia.",meaning_zh:"å­¦ç”Ÿ",
    examples:["El estudiante es aplicado."],
    roots:[{m:"estud",t:"root"}],
    topics:["estudio"],syn:["alumno"],ant:[],notes:""},
  {word:"estudiar",pos:"v.",level:["A1"],frequency:5,
    definition_es:"Aplicarse al estudio.",meaning_zh:"å­¦ä¹ ï¼›ç ”ç©¶",
    examples:["Estudio espaÃ±ol."],
    roots:[{m:"estud",t:"root"},{m:"ar",t:"suffix"}],
    topics:["estudio"],syn:["aprender"],ant:[],notes:""},
  {word:"lecciÃ³n",pos:"n.",level:["A1"],frequency:5,
    definition_es:"Unidad de enseÃ±anza.",meaning_zh:"è¯¾ï¼›è¯¾ç¨‹",
    examples:["La lecciÃ³n empieza a las nueve."],
    roots:[{m:"lecc",t:"root"},{m:"iÃ³n",t:"suffix"}],
    topics:["estudio"],syn:["clase"],ant:[],notes:""},
  {word:"examen",pos:"n.",level:["A2"],frequency:5,
    definition_es:"Prueba de evaluaciÃ³n.",meaning_zh:"è€ƒè¯•",
    examples:["El examen es maÃ±ana."],
    roots:[{m:"exam",t:"root"}],
    topics:["estudio"],syn:["prueba"],ant:[],notes:""},
  {word:"investigaciÃ³n",pos:"n.",level:["B1"],frequency:4,
    definition_es:"IndagaciÃ³n sistemÃ¡tica para descubrir hechos.",meaning_zh:"ç ”ç©¶ï¼›è°ƒæŸ¥",
    examples:["InvestigaciÃ³n cientÃ­fica."],
    roots:[{m:"investig",t:"root"},{m:"aciÃ³n",t:"suffix"}],
    topics:["ciencia","estudio"],syn:["indagaciÃ³n"],ant:[],notes:""},

  {word:"trabajo",pos:"n.",level:["A1"],frequency:5,
    definition_es:"Actividad remunerada; obra.",meaning_zh:"å·¥ä½œï¼›åŠ³åŠ¨",
    examples:["Busca trabajo en la ciudad."],
    roots:[{m:"trabaj",t:"root"}],
    topics:["trabajo"],syn:["empleo"],ant:[],notes:""},
  {word:"empresa",pos:"n.",level:["A2"],frequency:4,
    definition_es:"CompaÃ±Ã­a; entidad econÃ³mica.",meaning_zh:"å…¬å¸ï¼›ä¼ä¸š",
    examples:["La empresa contrata personal."],
    roots:[{m:"empres",t:"root"}],
    topics:["negocios"],syn:["compaÃ±Ã­a"],ant:[],notes:""},
  {word:"proyecto",pos:"n.",level:["A2"],frequency:4,
    definition_es:"Plan de trabajo.",meaning_zh:"é¡¹ç›®ï¼›æ–¹æ¡ˆ",
    examples:["Un proyecto internacional."],
    roots:[{m:"proyect",t:"root"}],
    topics:["trabajo"],syn:["plan"],ant:[],notes:""},
  {word:"reuniÃ³n",pos:"n.",level:["A2"],frequency:4,
    definition_es:"Encuentro de trabajo.",meaning_zh:"ä¼šè®®",
    examples:["Hay reuniÃ³n a las tres."],
    roots:[{m:"re",t:"prefix"},{m:"un",t:"root"},{m:"iÃ³n",t:"suffix"}],
    topics:["trabajo"],syn:["meeting"],ant:[],notes:"re- å†/èš"},
  {word:"contrato",pos:"n.",level:["B1"],frequency:4,
    definition_es:"Acuerdo jurÃ­dico.",meaning_zh:"åˆåŒï¼›å¥‘çº¦",
    examples:["Firmamos el contrato."],
    roots:[{m:"contrat",t:"root"}],
    topics:["ley","negocios"],syn:["acuerdo"],ant:[],notes:""},
  {word:"salario",pos:"n.",level:["B1"],frequency:4,
    definition_es:"RetribuciÃ³n del trabajo.",meaning_zh:"è–ªæ°´ï¼›å·¥èµ„",
    examples:["El salario es mensual."],
    roots:[{m:"salari",t:"root"}],
    topics:["trabajo","economÃ­a"],syn:["sueldo"],ant:[],notes:""},

  {word:"reservar",pos:"v.",level:["A2"],frequency:4,
    definition_es:"Apartar con antelaciÃ³n.",meaning_zh:"é¢„è®¢ï¼›é¢„çº¦",
    examples:["He reservado una mesa."],
    roots:[{m:"re",t:"prefix"},{m:"serv",t:"root"},{m:"ar",t:"suffix"}],
    topics:["viaje","vida"],syn:["apartar"],ant:[],notes:"re- åå¤/å†"},
  {word:"reserva",pos:"n.",level:["A2"],frequency:4,
    definition_es:"AcciÃ³n de reservar.",meaning_zh:"é¢„è®¢ï¼›é¢„çº¦",
    examples:["La reserva estÃ¡ confirmada."],
    roots:[{m:"re",t:"prefix"},{m:"serv",t:"root"}],
    topics:["viaje","vida"],syn:["cita"],ant:[],notes:""},
  {word:"billete",pos:"n.",level:["A1"],frequency:5,
    definition_es:"TÃ­tulo para entrar o viajar.",meaning_zh:"ç¥¨ï¼›è½¦ç¥¨",
    examples:["Compra el billete en lÃ­nea."],
    roots:[{m:"billet",t:"root"}],
    topics:["viaje"],syn:["ticket"],ant:[],notes:""},
  {word:"viaje",pos:"n.",level:["A1"],frequency:5,
    definition_es:"Desplazamiento a un lugar.",meaning_zh:"æ—…è¡Œ",
    examples:["Â¡Buen viaje!"],
    roots:[{m:"viaj",t:"root"}],
    topics:["viaje"],syn:["tour"],ant:[],notes:""},
  {word:"estaciÃ³n",pos:"n.",level:["A1"],frequency:5,
    definition_es:"Lugar de parada de trenes.",meaning_zh:"è½¦ç«™ï¼›ç«è½¦ç«™",
    examples:["Nos vemos en la estaciÃ³n."],
    roots:[{m:"estac",t:"root"},{m:"iÃ³n",t:"suffix"}],
    topics:["viaje"],syn:["parada"],ant:[],notes:""},
  {word:"aeropuerto",pos:"n.",level:["A2"],frequency:5,
    definition_es:"Infraestructura para trÃ¡fico aÃ©reo.",meaning_zh:"æœºåœº",
    examples:["El aeropuerto estÃ¡ lejos."],
    roots:[{m:"aero",t:"root"},{m:"port",t:"root"}],
    topics:["viaje"],syn:["terminal"],ant:[],notes:"aero(ç©º)+port(è¿)"}
];

/** ====== ç´¢å¼•ä¸çŠ¶æ€ ====== */
const ALL_LEVELS_ALL = ["A1","A2","B1","B2","C1","C2"];
let state = {
  words: DB[CURRENT_LANG],
  idx:{ byMorph:new Map(), byWord:new Map() },
  selected:null,
  srsQueue:[]
};

/** ====== ç´¢å¼•æ„å»º ====== */
function buildIndex(){
  state.idx.byMorph.clear();
  state.idx.byWord.clear();
  for(const w of state.words){
    state.idx.byWord.set((w.word||"").toLowerCase(), w);
    (w.roots||[]).forEach(r=>{
      if(!state.idx.byMorph.has(r.m)) state.idx.byMorph.set(r.m, new Set());
      state.idx.byMorph.get(r.m).add(w);
    });
  }
}

/** ====== DOM helpers ====== */
const $ = sel => document.querySelector(sel);
const $$ = sel => Array.from(document.querySelectorAll(sel));

/** ====== è¿‡æ»¤å™¨çŠ¶æ€ ====== */
const LEVEL_FILTER = new Set();
const POS_FILTER = new Set();
const TOPIC_FILTER = new Set();
const MORPH_FILTER = new Set();
let ONLY_ROOTS=false, REQUIRE_ALL=false, FREQ_MIN=1;
let QUERY="";

/** ====== åˆå§‹åŒ– ====== */
function chip(text, active=false){ const d=document.createElement('span'); d.className='chip'+(active?' active':''); d.textContent=text; return d; }

function currentAllPOS(){ return [...new Set(state.words.map(w=>w.pos.split(/[.,/ ]+/)[0]).filter(Boolean))]; }
function currentAllTopics(){ return [...new Set(state.words.flatMap(w=>w.topics||[]))].sort(); }
function currentAllMorphs(){ return [...new Set(state.words.flatMap(w=>w.roots?.map(r=>r.m)||[]))].sort(); }

function fillChips(){
  // levels
  const lvl=$("#levelChips"); lvl.innerHTML='';
  ALL_LEVELS_ALL.forEach(l=>{ const c=chip(l); c.onclick=()=>{toggleSet(LEVEL_FILTER,l); render();}; lvl.appendChild(c); });
  // pos
  const pc=$("#posChips"); pc.innerHTML='';
  currentAllPOS().forEach(p=>{ const c=chip(p); c.onclick=()=>{toggleSet(POS_FILTER,p); render();}; pc.appendChild(c); });
  // topics
  const tc=$("#topicChips"); tc.innerHTML='';
  currentAllTopics().forEach(t=>{ const c=chip(t); c.onclick=()=>{toggleSet(TOPIC_FILTER,t); render();}; tc.appendChild(c); });
  // morphs (çƒ­é—¨)
  const mc=$("#morphChips"); mc.innerHTML='';
  const hot = ["re","ri","pre","anti","auto","dis","in","im","ir","il","tele","micro","macro","multi","mono","inter","tras","trans","bio","geo","foto","graf","fono","logia","port","scriv","scrib","dic","vis","inform","comunic","zione","sione","ciÃ³n","siÃ³n","mente","ario","ismo","ista","itÃ ","idad","ivo","oso","osa","are","ere","ire","ar","er","ir"].filter(m=>currentAllMorphs().includes(m));
  hot.forEach(m=>{ const c=chip(m); c.onclick=()=>{toggleSet(MORPH_FILTER,m); render();}; mc.appendChild(c); });
}

function toggleSet(set,key){ set.has(key)? set.delete(key): set.add(key); }

function resetFilters(){
  LEVEL_FILTER.clear(); POS_FILTER.clear(); TOPIC_FILTER.clear(); MORPH_FILTER.clear();
  ONLY_ROOTS=false; REQUIRE_ALL=false; FREQ_MIN=1; QUERY='';
  $("#onlyRoots").checked=false; $("#requireAll").checked=false;
  $("#freq").value=1; $("#freqVal").textContent='â‰¥1';
  $("#q").value=''; $("#morphSearch").value='';
}

/** ====== æ£€ç´¢é€»è¾‘ ====== */
function searchAndFilter(){
  let arr = state.words.filter(w=>{
    if((w.frequency||1) < FREQ_MIN) return false;
    if(LEVEL_FILTER.size && !w.level?.some(l=>LEVEL_FILTER.has(l))) return false;
    if(POS_FILTER.size && !POS_FILTER.has(w.pos.split(/[.,/ ]+/)[0])) return false;
    if(TOPIC_FILTER.size && !w.topics?.some(t=>TOPIC_FILTER.has(t))) return false;
    if(MORPH_FILTER.size){
      const morphs = (w.roots||[]).filter(r=>ONLY_ROOTS? r.t==='root' : true).map(r=>r.m);
      if(REQUIRE_ALL){
        for(const m of MORPH_FILTER) if(!morphs.includes(m)) return false;
      }else{
        let ok=false; for(const m of MORPH_FILTER){ if(morphs.includes(m)){ ok=true; break; } }
        if(!ok) return false;
      }
    }
    if(QUERY){
      const q = QUERY.toLowerCase();
      const hay = [
        w.word, w.meaning_zh,
        (CURRENT_LANG==='it'? w.definition_it : w.definition_es),
        w.pos, ...(w.level||[]), ...(w.topics||[]),
        ...((w.syn||[])), ...((w.ant||[])),
        ...((w.roots||[]).map(r=>r.m))
      ].join(' | ').toLowerCase();
      if(!fuzzyIncludes(hay, q)) return false;
    }
    return true;
  });
  return arr;
}
function fuzzyIncludes(text,q){
  if(text.includes(q)) return true;
  const parts=q.split(/\s+/).filter(Boolean);
  return parts.every(p=>text.includes(p));
}

/** ====== æ¸²æŸ“ç»“æœ ====== */
const grid=$("#grid");
function render(){
  const list = searchAndFilter();
  $("#total").textContent = state.words.length;
  $("#count").textContent = list.length;
  grid.innerHTML='';
  list.forEach(w=>{
    const card=document.createElement('div');
    card.className='word-card';
    card.innerHTML = `
      <div class="word-head">
        <div class="word">${hlMorphemeInWord(w)}</div>
        <div class="tags">
          ${(w.level||[]).map(l=>`<span class="badge">${l}</span>`).join('')}
          <span class="pill">${w.pos}</span>
          <span class="pill">F${w.frequency||1}</span>
        </div>
      </div>
      <div class="mean">${escapeHtml(w.meaning_zh||'')}</div>
      <div class="morph">${(w.roots||[]).map(r=>morphTag(r)).join('')}</div>
    `;
    card.onclick = ()=>{ selectWord(w.word); };
    card.ondblclick = ()=>{ addToSrs(w.word); flash(card); };
    grid.appendChild(card);
  });
  if(list.length && !state.selected){ selectWord(list[0].word); }
  if(state.selected && !list.includes(state.selected)){
    if(list[0]) selectWord(list[0].word); else clearDetail();
  }
  syncActiveChips();
}
function flash(el){ el.style.outline='2px solid var(--primary)'; setTimeout(()=>el.style.outline='', 350); }
function morphTag(r){
  const meta = MORPHEMES[r.m]||{type:r.t};
  const cls = r.t==='prefix'?'pre':(r.t==='suffix'?'suf':'root');
  const title = `${r.m} Â· ${meta.type||r.t} Â· ${(meta.zh||'')}`;
  return `<span class="${cls}" title="${escapeHtml(title)}">${escapeHtml(r.m)}</span>`;
}
function hlMorphemeInWord(w){
  let html = escapeHtml(w.word||'');
  const parts = (w.roots||[]).map(r=>r.m).sort((a,b)=>b.length-a.length);
  for(const m of parts){
    const idx = html.toLowerCase().indexOf(m.toLowerCase());
    if(idx>=0){
      const pre = html.slice(0, idx);
      const mid = html.slice(idx, idx+m.length);
      const suf = html.slice(idx+m.length);
      const t = MORPHEMES[m]?.type || 'root';
      const spanCls = t==='prefix'?'hlt-pre':(t==='suffix'?'hlt-suf':'hlt');
      html = `${pre}<span class="${spanCls}">${mid}</span>${suf}`;
    }
  }
  return html;
}
function syncActiveChips(){
  $$("#levelChips .chip").forEach(c=>c.classList.toggle('active', LEVEL_FILTER.has(c.textContent)));
  $$("#posChips .chip").forEach(c=>c.classList.toggle('active', POS_FILTER.has(c.textContent)));
  $$("#topicChips .chip").forEach(c=>c.classList.toggle('active', TOPIC_FILTER.has(c.textContent)));
  $$("#morphChips .chip").forEach(c=>c.classList.toggle('active', MORPH_FILTER.has(c.textContent)));
}

/** ====== è¯¦æƒ…é¢æ¿ ====== */
function selectWord(word){
  const w = state.idx.byWord.get((word||"").toLowerCase());
  state.selected = w;
  $("#dWord").innerHTML = hlMorphemeInWord(w);
  $("#dReading").textContent = '';
  $("#dMorph").innerHTML = (w.roots||[]).map(r=>{
    const el=document.createElement('span');
    el.className = r.t==='prefix'?'pre':(r.t==='suffix'?'suf':'root');
    el.textContent = r.m;
    const meta = MORPHEMES[r.m]||{};
    el.title = `${r.m} Â· ${(meta.type||r.t)} Â· ${(meta.zh||'')}`;
    el.style.cursor='pointer';
    el.onclick=()=>{ MORPH_FILTER.add(r.m); render(); };
    return el.outerHTML;
  }).join('');
  $("#dDef").textContent = (CURRENT_LANG==='it'? (w.definition_it||'') : (w.definition_es||''));
  $("#dMean").textContent = w.meaning_zh || '';
  $("#dPos").textContent = w.pos || '';
  $("#dLevel").innerHTML = (w.level||[]).map(l=>`<span class="badge">${l}</span>`).join(' ');
  $("#dTopics").innerHTML = (w.topics||[]).map(t=>`<span class="pill">${t}</span>`).join(' ');
  $("#dFreq").innerHTML = 'F'+(w.frequency||1);
  $("#dExamples").innerHTML = (w.examples||[]).map(s=>`<li>${escapeHtml(s)}</li>`).join('') || '<li><small class="dim">æš‚æ— ä¾‹å¥</small></li>';
  const sim = similarWords(w.word, 10).filter(s=>s.word!==w.word);
  $("#dSimilar").innerHTML = sim.map(s=>`<span class="sim-item" title="ç¼–è¾‘è·ç¦»ï¼š${s.dist}">${escapeHtml(s.word)}</span>`).join('') || '<small class="dim">æ— </small>';
  $$("#dSimilar .sim-item").forEach(el=>{ el.onclick=()=>selectWord(el.textContent); });
  const fam = familyWords(w);
  $("#dFamily").innerHTML = fam.map(x=>`<span class="fam-item">${escapeHtml(x.word)}</span>`).join('') || '<small class="dim">æ— </small>';
  $$("#dFamily .fam-item").forEach(el=>{ el.onclick=()=>selectWord(el.textContent); });
  $("#dNotes").textContent = w.notes||'';
}
function clearDetail(){
  $("#dWord").textContent='é€‰æ‹©ä¸€ä¸ªè¯'; $("#dReading").textContent='';
  $("#dMorph").innerHTML=''; $("#dDef").textContent=''; $("#dMean").textContent='';
  $("#dPos").textContent=''; $("#dLevel").innerHTML=''; $("#dTopics").innerHTML=''; $("#dFreq").innerHTML='';
  $("#dExamples").innerHTML=''; $("#dSimilar").innerHTML=''; $("#dFamily").innerHTML=''; $("#dNotes").textContent='';
}

/** ====== å‘éŸ³ ====== */
$("#speakBtn").onclick = ()=>{
  if(!state.selected) return;
  const u = new SpeechSynthesisUtterance(state.selected.word);
  u.lang = CURRENT_LANG==='it' ? 'it-IT' : 'es-ES';
  speechSynthesis.speak(u);
};

/** ====== å½¢è¿‘è¯ï¼ˆç¼–è¾‘è·ç¦»ï¼‰ ====== */
function levenshtein(a,b){
  const m=a.length,n=b.length;
  const dp=Array.from({length:m+1},(_,i)=>Array(n+1).fill(0));
  for(let i=0;i<=m;i++)dp[i][0]=i;
  for(let j=0;j<=n;j++)dp[0][j]=j;
  for(let i=1;i<=m;i++){
    for(let j=1;j<=n;j++){
      const ca=a[i-1].toLowerCase(), cb=b[j-1].toLowerCase();
      const cost = ca===cb?0:1;
      dp[i][j]=Math.min(dp[i-1][j]+1, dp[i][j-1]+1, dp[i-1][j-1]+cost);
    }
  }
  return dp[m][n];
}
function similarWords(word, topN=10){
  const arr = state.words.map(w=>{
    const d = levenshtein(word, w.word);
    const n = Math.max(word.length, w.word.length)||1;
    const score = 1 - d/n;
    return {word:w.word, dist:d, score};
  }).sort((a,b)=>a.dist-b.dist || b.score-a.score);
  return arr.slice(0, topN);
}
function familyWords(w){
  const keys = (w.roots||[]).map(r=>r.m);
  const set = new Set();
  for(const k of keys){
    const bucket = state.idx.byMorph.get(k);
    if(!bucket) continue;
    for(const x of bucket){ if(x.word!==w.word) set.add(x); }
  }
  return [...set].slice(0, 24);
}

/** ====== Debounce/Utils ====== */
function debounce(fn, delay){ let t; return (...args)=>{ clearTimeout(t); t=setTimeout(()=>fn(...args),delay); }; }
function escapeHtml(s){ return (s??'').toString().replace(/[&<>"']/g, m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[m])); }

/** ====== å¯¼å…¥/å¯¼å‡º ====== */
$("#importBtn").onclick = ()=> $("#fileInput").click();
$("#fileInput").onchange = async (e)=>{
  const file = e.target.files[0]; if(!file) return;
  const txt = await file.text();
  try{
    const data = JSON.parse(txt);
    if(!Array.isArray(data)) throw new Error('JSON é¡»ä¸ºæ•°ç»„');
    data.forEach(x=>{
      if(!x.word) throw new Error('æ¯ä¸ªæ¡ç›®é¡»åŒ…å« word å­—æ®µ');
      x.level = x.level || ["B1"];
      x.roots = x.roots || [];
      x.frequency = x.frequency || 3;
    });
    // åˆå¹¶åˆ°å½“å‰è¯­è¨€è¯åº“
    DB[CURRENT_LANG] = mergeWords(DB[CURRENT_LANG], data);
    state.words = DB[CURRENT_LANG];
    buildIndex(); $("#total").textContent = state.words.length; fillChips(); render();
    alert('å¯¼å…¥æˆåŠŸï¼Œå…± '+data.length+' æ¡ï¼›å½“å‰è¯åº“ '+state.words.length+' æ¡ã€‚');
  }catch(err){
    alert('å¯¼å…¥å¤±è´¥ï¼š'+err.message);
  }finally{
    e.target.value='';
  }
};
$("#exportBtn").onclick = ()=>{
  const blob = new Blob([JSON.stringify(DB[CURRENT_LANG], null, 2)], {type:'application/json'});
  const url = URL.createObjectURL(blob);
  const a=document.createElement('a'); a.href=url; a.download=(CURRENT_LANG==='it'?'it':'es')+'-wordbank.json'; a.click();
  URL.revokeObjectURL(url);
};
function mergeWords(base, incoming){
  const map = new Map(base.map(w=>[w.word.toLowerCase(), w]));
  for(const w of incoming){
    const k = w.word.toLowerCase();
    if(map.has(k)){
      const old = map.get(k);
      map.set(k, {
        ...old, ...w,
        level: uniq([...(old.level||[]), ...(w.level||[])]),
        topics: uniq([...(old.topics||[]), ...(w.topics||[])]),
        syn: uniq([...(old.syn||[]), ...(w.syn||[])]),
        ant: uniq([...(old.ant||[]), ...(w.ant||[])]),
        roots: uniqMorph([...(old.roots||[]), ...(w.roots||[])]),
        examples: uniq([...(old.examples||[]), ...(w.examples||[])])
      });
    }else{
      map.set(k, w);
    }
  }
  return [...map.values()];
}
function uniq(arr){ return Array.from(new Set((arr||[]).filter(Boolean))); }
function uniqMorph(arr){
  const seen=new Set(); const out=[];
  for(const r of (arr||[])){
    const k=r.m+'|'+(r.t||'');
    if(!seen.has(k)){ out.push(r); seen.add(k); }
  }
  return out;
}

/** ====== åœºæ™¯å¥ç”Ÿæˆï¼ˆæŒ‰è¯­è¨€ï¼‰ ====== */
$("#genSceneBtn").onclick = ()=>{
  const list = searchAndFilter().slice(0,8);
  if(!list.length){ alert('è¯·å…ˆç­›é€‰ä¸€äº›å•è¯'); return; }
  const lines = CURRENT_LANG==='it' ? generateSceneIT(list) : generateSceneES(list);
  alert((CURRENT_LANG==='it'?'Frasi di scena:':'Frases de escena:')+"\n\n"+lines.join("\n"));
};
function pickByTopic(words, topic, fallback){
  const arr = words.filter(w=>w.topics?.includes(topic));
  if(arr.length) return arr[Math.floor(Math.random()*arr.length)];
  return fallback || words[Math.floor(Math.random()*words.length)];
}
function W(x){ return x?.word || ""; }
function generateSceneIT(words){
  const edu = pickByTopic(words,'studio');
  const work = pickByTopic(words,'lavoro');
  const sci = pickByTopic(words,'scienza');
  const itw = pickByTopic(words,'IT');
  const viag = pickByTopic(words,'viaggio');
  return [
    `Campus: Durante la ${W(edu)} abbiamo ${W(pickByTopic(words,'studio'))||'studiato'} l'${W(sci)||'argomento'} e preparato la ${W(pickByTopic(words,'studio'))||'lezione'}.`,
    `Ufficio: La ${W(work)||'riunione'} Ã¨ stata ${W(pickByTopic(words,'lavoro'))||'organizzata'} ${'chiaramente'} e il ${W(pickByTopic(words,'lavoro'))||'progetto'} Ã¨ ${'visibile'}.`,
    `Tech: Con la ${W(itw)||'informazione'} e la ${W(pickByTopic(words,'societÃ '))||'comunicazione'}, possiamo ${W(pickByTopic(words,'lavoro'))||'organizzare'} ${'facilmente'}.`,
    `Viaggio: Ho ${W(pickByTopic(words,'viaggio'))||'prenotato'} la ${W(viag)||'prenotazione'} e preso il ${W(pickByTopic(words,'viaggio'))||'biglietto'}.`
  ];
}
function generateSceneES(words){
  const edu = pickByTopic(words,'estudio');
  const work = pickByTopic(words,'trabajo');
  const sci = pickByTopic(words,'ciencia');
  const itw = pickByTopic(words,'IT');
  const trip = pickByTopic(words,'viaje');
  return [
    `Campus: En la ${W(edu)} ${W(pickByTopic(words,'estudio'))||'estudiamos'} el tema de ${W(sci)||'investigaciÃ³n'} y preparamos la ${W(pickByTopic(words,'estudio'))||'lecciÃ³n'}.`,
    `Oficina: La ${W(work)||'reuniÃ³n'} fue ${'claramente'} ${W(pickByTopic(words,'trabajo'))||'organizada'} y el ${W(pickByTopic(words,'trabajo'))||'proyecto'} es ${'visible'}.`,
    `TecnologÃ­a: Con la ${W(itw)||'informaciÃ³n'} y la ${W(pickByTopic(words,'sociedad'))||'comunicaciÃ³n'}, podemos ${W(pickByTopic(words,'trabajo'))||'organizar'} ${'fÃ¡cilmente'}.`,
    `Viaje: He ${W(pickByTopic(words,'viaje'))||'reservado'} la ${W(trip)||'reserva'} y comprÃ© el ${W(pickByTopic(words,'viaje'))||'billete'}.`
  ];
}

/** ====== SRSï¼ˆç®€åŒ– SM-2ï¼‰ ====== */
const SRS_KEY = 'romance_srs_v1';
function loadSrs(){ try{return JSON.parse(localStorage.getItem(SRS_KEY)||'{}');}catch{return {};} }
function saveSrs(db){ localStorage.setItem(SRS_KEY, JSON.stringify(db)); }
function addToSrs(word){
  const key = CURRENT_LANG+":"+word;
  const db = loadSrs();
  if(!db[key]) db[key]={EF:2.5, interval:0, reps:0, due:Date.now()};
  saveSrs(db);
}
function getDueWordsFrom(list){
  const db=loadSrs(); const now=Date.now(); const arr=[];
  for(const w of list){ const key=CURRENT_LANG+":"+w.word; const rec=db[key]||{due:0}; if(rec.due<=now) arr.push(w); }
  return arr;
}
$("#startSrsBtn").onclick = ()=>{
  const list = searchAndFilter();
  if(!list.length){ alert('å½“å‰æ— å¯å¤ä¹ å•è¯'); return; }
  state.srsQueue = getDueWordsFrom(list);
  if(!state.srsQueue.length){ alert('å½“å‰ç­›é€‰çš„è¯éƒ½ä¸åº”å¤ä¹ ï¼ˆå°šæœªåˆ°æœŸï¼‰ã€‚'); return; }
  $("#srsPanel").style.display='flex'; nextSrs();
};
$("#srsClose").onclick = ()=>$("#srsPanel").style.display='none';
$("#srsShow").onclick = ()=>{ $("#srsA").style.display='block'; };
$("#srsAgain").onclick = ()=>srsRate(0);
$("#srsHard").onclick = ()=>srsRate(3);
$("#srsGood").onclick = ()=>srsRate(4);
$("#srsEasy").onclick = ()=>srsRate(5);
let currentSrs=null;
function nextSrs(){
  if(!state.srsQueue.length){
    $("#srsQ").textContent='ğŸ‰ ä»Šæ—¥å¤ä¹ å®Œæˆ'; $("#srsA").style.display='none'; $("#srsInfo").textContent=''; return;
  }
  currentSrs = state.srsQueue.shift();
  const def = (CURRENT_LANG==='it' ? currentSrs.definition_it : currentSrs.definition_es) || '';
  $("#srsQ").textContent = def+' / '+(currentSrs.meaning_zh||'');
  $("#srsA").innerHTML = `<b>${hlMorphemeInWord(currentSrs)}</b><div class="mean">${escapeHtml(currentSrs.pos)} Â· ${(currentSrs.level||[]).join(', ')}</div>`;
  $("#srsA").style.display='none';
  $("#srsInfo").textContent = `å‰©ä½™ï¼š${state.srsQueue.length}`;
}
function srsRate(q){
  if(!currentSrs) return;
  const key = CURRENT_LANG+":"+currentSrs.word;
  const db = loadSrs();
  const rec = db[key] || {EF:2.5, interval:0, reps:0, due:Date.now()};
  if(q<3){
    rec.reps=0; rec.interval=1; rec.due=Date.now()+1*24*3600*1000;
  }else{
    rec.reps+=1;
    let EF = rec.EF + (0.1 - (5-q)*(0.08 + (5-q)*0.02));
    if(EF<1.3) EF=1.3;
    rec.EF=EF;
    if(rec.reps===1) rec.interval=1;
    else if(rec.reps===2) rec.interval=3;
    else rec.interval=Math.round(rec.interval*rec.EF);
    rec.due = Date.now()+rec.interval*24*3600*1000;
  }
  db[key]=rec; saveSrs(db); nextSrs();
}

/** ====== äº‹ä»¶ç»‘å®š ====== */
$("#q").addEventListener('input', debounce(e=>{ QUERY=e.target.value.trim(); render(); }, 150));
$("#clearBtn").onclick = ()=>{ $("#q").value=''; QUERY=''; render(); };
$("#morphSearch").addEventListener('keydown', e=>{
  if(e.key==='Enter'){
    const v=e.target.value.trim();
    if(v){ MORPH_FILTER.add(v.replace(/\s+/g,'').toLowerCase()?v:''); e.target.value=''; render(); }
  }
});
$("#requireAll").onchange = e=>{REQUIRE_ALL=e.target.checked; render();}
$("#onlyRoots").onchange = e=>{ONLY_ROOTS=e.target.checked; render();}
$("#freq").oninput = e=>{FREQ_MIN=+e.target.value; $("#freqVal").textContent='â‰¥'+FREQ_MIN; render();}
$("#resetBtn").onclick = ()=>{ resetFilters(); render(); };

$("#darkBtn").onclick = ()=>{ document.body.classList.toggle('dark'); localStorage.setItem('it_es_dark', document.body.classList.contains('dark')?'1':'0'); }
if(localStorage.getItem('it_es_dark')==='1') document.body.classList.add('dark');

$("#langSelect").onchange = e=>{
  CURRENT_LANG = e.target.value;
  state.words = DB[CURRENT_LANG];
  buildIndex();
  resetFilters();
  fillChips();
  $("#total").textContent = state.words.length;
  render();
};

/** ====== å¯åŠ¨ ====== */
buildIndex();
fillChips();
$("#total").textContent = state.words.length;
render();
</script>
</body>
</html>